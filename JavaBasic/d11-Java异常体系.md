任何程序都追求正确有效的运行，除了保证我们代码尽可能的少出错之外，我们还要考虑如何有效的处理异常，一个良好的异常[框架](https://so.csdn.net/so/search?q=%E6%A1%86%E6%9E%B6&spm=1001.2101.3001.7020)对于系统来说是至关重要的。最近在给公司写采集框架的时候系统的了解一边，收获颇多，特此记录相关的理论。

## 1 .异常体系简介：

异常是指由于各种不期而至的情况，导致程序中断
### Throwable：有两个重要的子类：Exception（异常）和Error（错误），两者都包含了大量的异常处理类。

1、Error（错误）：是程序中无法处理的错误，表示运行应用程序中出现了严重的错误。此类错误一般表示代码运行时JVM出现问题。通常有Virtual MachineError（虚拟机运行错误）、NoClassDefFoundError（类定义错误）等。比如说当jvm耗完可用内存时，将出现OutOfMemoryError。此类错误发生时，JVM将终止线程。
这些错误是不可查的，非代码性错误。因此，当此类错误发生时，应用不应该去处理此类错误。
2、Exception（异常）：程序本身可以捕获并且可以处理的异常。


#### Exception这种异常又分为两类：运行时异常和编译异常。

1、运行时异常(不受检异常)：RuntimeException类极其子类表示JVM在运行期间可能出现的错误。比如说

- 试图使用空值对象的引用（NullPointerException）。就是一个指针是空指针，你还要去操作它，既然它指向的是空对象，它就不能使用这个对象的方法
- 数组下标越界（ArrayIndexOutBoundException）。此类异常属于不可查异常，一般是由程序逻辑错误引起的，在程序中可以选择捕获处理，也可以不处理。
- 类型转换异常 ClassCastException
- 数学操作异常 ArithmeticException
- 数字转换异常 .NumberFormatException
-


2、编译异常(受检异常)：Exception中除RuntimeException极其子类之外的异常。如果程序中出现此类异常，比如说IOException，必须对该异常进行处理，否则编译不通过。在程序中，通常不会自定义该类异常，而是直接使用系统提供的异常类。

可查异常与不可查异常：java的所有异常可以分为可查异常（checked exception）和不可查异常（unchecked exception）。
- 1、可查异常：编译器要求必须处理的异常。正确的程序在运行过程中，经常容易出现的、符合预期的异常情况。一旦发生此类异常，就必须采用某种方式进行处理。除RuntimeException及其子类外，其他的Exception异常都属于可查异常。编译器会检查此类异常，也就是说当编译器检查到应用中的某处可能会此类异常时，将会提示你处理本异常——要么使用try-catch捕获，要么使用throws语句抛出，否则编译不通过。
- 2、不可查异常：编译器不会进行检查并且不要求必须处理的异常，也就说当程序中出现此类异常时，即使我们没有try-catch捕获它，也没有使用throws抛出该异常，编译也会正常通过。该类异常包括运行时异常（RuntimeException极其子类）和错误（Error）。
一、编译时异常的处理机制

## 编译时异常的处理有三种：

1、出现异常直接抛出去给调用者，调用者也继续抛出去
2、出现异常自己捕获处理，不麻烦别人
3、前两者的结合，出现异常直接抛出去给调用者，调用者捕获处理

### 异常处理方式一：throws

throws：用在方法上，可以将方法内部出现的异常抛出去给本方法的调用者处理
方式并不好，发送异常的方法自己不处理异常，如果异常最终抛出去给虚拟机将引起程序死亡
格式：
方法 throws 异常1,异常2...{}
throws异常可以抛出很多个，所以不建议使用，建议将上面的异常改为下面的格式

方法throws Exception{}
Exception为最高级的，所以定义一个就可以了

### 异常处理方式二：try-catch

1、监视捕获异常，用在方法内部，可以将方法内部出现的异常直接捕获处理
发送异常的方法自己独立完成异常的处理，程序可以继续往下执行

官方建议格式

```
try{
}catch(Exception e){
	e.printStackTrace(); // 打印异常信息
}
```

Exception可以捕获一切异常类型

### 异常处理方式3：前两者的集合【理论上最好的】

1、方法直接将异常通过throws抛出去给调用者
2、调用者收到异常后直接处理，而不是像方式一一样再抛出去
调用者接收异常使用try-catch处理

## 自定义异常

编译时异常

1.  定义一个异常类继承Exception
1.  重写构造器
1.  现异常的地方用throw new 自定义对象抛出


作用：编译时异常是编译阶段就会报错，提醒更加强烈，一定需要处理
编译时异常示例代码

## 自定义运行时异常

1. 定义一个异常类继承RuntimeException
1. 重写构造器
1. 在出现异常的地方用 throw new 自定义对象抛出


作用：提醒不强烈，编译阶段不报错，运行时才可能出现